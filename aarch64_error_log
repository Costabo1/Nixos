root@Nixos /e/nixos# nix flake update
root@Nixos /e/nixos# nixos-rebuild switch --show-trace
building the system configuration...
error:
       … while evaluating the attribute 'activationScript' of the derivation 'nixos-system-Nixos-23.05.20230308.c90c402'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/pkgs/stdenv/generic/make-derivation.nix:294:7:

          293|     // (lib.optionalAttrs (attrs ? name || (attrs ? pname && attrs ? version)) {
          294|       name =
             |       ^
          295|         let

       … while evaluating the attribute 'system.activationScripts.script'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/activation/activation-script.nix:137:9:

          136|       apply = set: set // {
          137|         script = systemActivationScript set false;
             |         ^
          138|       };

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/activation/activation-script.nix:137:18:

          136|       apply = set: set // {
          137|         script = systemActivationScript set false;
             |                  ^
          138|       };

       … while calling 'systemActivationScript'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/activation/activation-script.nix:20:33:

           19|
           20|   systemActivationScript = set: onlyDry: let
             |                                 ^
           21|     set' = mapAttrs (_: v: if isString v then (noDepEntry v) // { supportsDryActivation = false; } else v) set;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/activation/activation-script.nix:49:9:

           48|
           49|       ${textClosureMap id (withDrySnippets) (attrNames withDrySnippets)}
             |         ^
           50|

       … while calling 'textClosureMap'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/strings-with-deps.nix:75:35:

           74|
           75|   textClosureMap = f: predefined: names:
             |                                   ^
           76|     concatStringsSep "\n" (map f (textClosureList predefined names));

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'id'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/trivial.nix:14:5:

           13|     # The value to return
           14|     x: x;
             |     ^
           15|

       … while evaluating the attribute 'text'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/activation/activation-script.nix:9:5:

            8|   addAttributeName = mapAttrs (a: v: v // {
            9|     text = ''
             |     ^
           10|       #### Activation script snippet ${a}:

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'g'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:535:19:

          534|           g =
          535|             name: value:
             |                   ^
          536|             if isAttrs value && cond value

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:538:20:

          537|               then recurse (path ++ [name]) value
          538|               else f (path ++ [name]) value;
             |                    ^
          539|         in mapAttrs g;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:270:72:

          269|           # For definitions that have an associated option
          270|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          271|

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:728:9:

          727|     in warnDeprecation opt //
          728|       { value = builtins.addErrorContext "while evaluating the option `${showOption loc}':" value;
             |         ^
          729|         inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.activationScripts.etc.text':

       … while evaluating the attribute 'mergedValue'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:763:5:

          762|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
          763|     mergedValue =
             |     ^
          764|       if isDefined then

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:757:9:

          756|       in {
          757|         values = defs''';
             |         ^
          758|         inherit (defs'') highestPrio;

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:856:7:

          855|     in {
          856|       values = concatMap (def: if getPrio def == highestPrio then [(strip def)] else []) defs;
             |       ^
          857|       inherit highestPrio;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:17:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                 ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:28:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                            ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while evaluating definitions from `/nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/etc/etc-activation.nix':

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:744:137:

          743|         defs' = concatMap (m:
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                                                                         ^
          745|         ) defs;

       … while calling 'dischargeProperties'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:815:25:

          814|   */
          815|   dischargeProperties = def:
             |                         ^
          816|     if def._type or "" == "merge" then

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:568:44:

          567|       defnsByName' = byName "config" (module: value:
          568|           [{ inherit (module) file; inherit value; }]
             |                                            ^
          569|         ) configs;

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:716:24:

          715|     let f = attrPath:
          716|       zipAttrsWith (n: values:
             |                        ^
          717|         let here = attrPath ++ [n]; in

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/types.nix:546:29:

          545|       merge = loc: defs:
          546|         zipAttrsWith (name: defs:
             |                             ^
          547|           let merged = mergeDefinitions (loc ++ [name]) elemType defs;

       … while evaluating the attribute 'optionalValue.value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:775:5:

          774|
          775|     optionalValue =
             |     ^
          776|       if isDefined then { value = mergedValue; }

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:757:9:

          756|       in {
          757|         values = defs''';
             |         ^
          758|         inherit (defs'') highestPrio;

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:856:7:

          855|     in {
          856|       values = concatMap (def: if getPrio def == highestPrio then [(strip def)] else []) defs;
             |       ^
          857|       inherit highestPrio;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:17:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                 ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:28:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                            ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while evaluating definitions from `/nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/etc/etc.nix':

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:744:137:

          743|         defs' = concatMap (m:
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                                                                         ^
          745|         ) defs;

       … while calling 'dischargeProperties'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:815:25:

          814|   */
          815|   dischargeProperties = def:
             |                         ^
          816|     if def._type or "" == "merge" then

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/types.nix:552:58:

          551|         # Push down position info.
          552|         (map (def: mapAttrs (n: v: { inherit (def) file; value = v; }) def.value) defs);
             |                                                          ^
          553|       emptyValue = { value = {}; };

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:88:39:

           87|         then value
           88|         else { ${elemAt attrPath n} = atDepth (n + 1); };
             |                                       ^
           89|     in atDepth 0;

       … while calling 'atDepth'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:85:17:

           84|       len = length attrPath;
           85|       atDepth = n:
             |                 ^
           86|         if n == len

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:568:44:

          567|       defnsByName' = byName "config" (module: value:
          568|           [{ inherit (module) file; inherit value; }]
             |                                            ^
          569|         ) configs;

       … while evaluating the attribute 'buildCommand' of the derivation 'etc'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/pkgs/stdenv/generic/make-derivation.nix:294:7:

          293|     // (lib.optionalAttrs (attrs ? name || (attrs ? pname && attrs ? version)) {
          294|       name =
             |       ^
          295|         let

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/etc/etc.nix:54:7:

           53|     mkdir -p "$out/etc"
           54|     ${concatMapStringsSep "\n" (etcEntry: escapeShellArgs [
             |       ^
           55|       "makeEtcEntry"

       … while calling 'concatMapStringsSep'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/strings.nix:114:5:

          113|     # List of input strings
          114|     list: concatStringsSep sep (map f list);
             |     ^
          115|

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/etc/etc.nix:54:33:

           53|     mkdir -p "$out/etc"
           54|     ${concatMapStringsSep "\n" (etcEntry: escapeShellArgs [
             |                                 ^
           55|       "makeEtcEntry"

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/nixos/modules/system/etc/etc.nix:54:43:

           53|     mkdir -p "$out/etc"
           54|     ${concatMapStringsSep "\n" (etcEntry: escapeShellArgs [
             |                                           ^
           55|       "makeEtcEntry"

       … while calling 'concatMapStringsSep'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/strings.nix:114:5:

          113|     # List of input strings
          114|     list: concatStringsSep sep (map f list);
             |     ^
          115|

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'escapeShellArg'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/strings.nix:381:20:

          380|   */
          381|   escapeShellArg = arg: "'${replaceStrings ["'"] ["'\\''"] (toString arg)}'";
             |                    ^
          382|

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'g'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:535:19:

          534|           g =
          535|             name: value:
             |                   ^
          536|             if isAttrs value && cond value

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:538:20:

          537|               then recurse (path ++ [name]) value
          538|               else f (path ++ [name]) value;
             |                    ^
          539|         in mapAttrs g;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:270:72:

          269|           # For definitions that have an associated option
          270|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          271|

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:728:9:

          727|     in warnDeprecation opt //
          728|       { value = builtins.addErrorContext "while evaluating the option `${showOption loc}':" value;
             |         ^
          729|         inherit (res.defsFinal') highestPrio;

       … while evaluating the option `environment.etc.dbus-1.source':

       … while evaluating the attribute 'mergedValue'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:763:5:

          762|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
          763|     mergedValue =
             |     ^
          764|       if isDefined then

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:12:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |            ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:17:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |                 ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:22:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |                      ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while calling 'check'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/types.nix:482:15:

          481|       descriptionClass = "noun";
          482|       check = x: isStringLike x && builtins.substring 0 1 (toString x) == "/";
             |               ^
          483|       merge = mergeEqualOption;

       … while evaluating the attribute 'serviceDirectories' of the derivation 'dbus-1'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/pkgs/stdenv/generic/make-derivation.nix:294:7:

          293|     // (lib.optionalAttrs (attrs ? name || (attrs ? pname && attrs ? version)) {
          294|       name =
             |       ^
          295|         let

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/types.nix:492:14:

          491|       merge = loc: defs:
          492|         map (x: x.value) (filter (x: x ? value) (concatLists (imap1 (n: def:
             |              ^
          493|           imap1 (m: def':

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:776:27:

          775|     optionalValue =
          776|       if isDefined then { value = mergedValue; }
             |                           ^
          777|       else {};

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:12:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |            ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:17:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |                 ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:765:22:

          764|       if isDefined then
          765|         if all (def: type.check def.value) defsFinal then type.merge loc defsFinal
             |                      ^
          766|         else let allInvalid = filter (def: ! type.check def.value) defsFinal;

       … while calling 'check'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/types.nix:482:15:

          481|       descriptionClass = "noun";
          482|       check = x: isStringLike x && builtins.substring 0 1 (toString x) == "/";
             |               ^
          483|       merge = mergeEqualOption;

       … while evaluating the attribute 'passAsFile' of the derivation 'system-path'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/pkgs/stdenv/generic/make-derivation.nix:294:7:

          293|     // (lib.optionalAttrs (attrs ? name || (attrs ? pname && attrs ? version)) {
          294|       name =
             |       ^
          295|         let

       … while evaluating the attribute 'passAsFile'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/pkgs/build-support/buildenv/default.nix:77:5:

           76|     # XXX: The size is somewhat arbitrary
           77|     passAsFile = if builtins.stringLength pkgs >= 128*1024 then [ "pkgs" ] else [ ];
             |     ^
           78|   }

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'g'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:535:19:

          534|           g =
          535|             name: value:
             |                   ^
          536|             if isAttrs value && cond value

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:538:20:

          537|               then recurse (path ++ [name]) value
          538|               else f (path ++ [name]) value;
             |                    ^
          539|         in mapAttrs g;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:270:72:

          269|           # For definitions that have an associated option
          270|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          271|

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:728:9:

          727|     in warnDeprecation opt //
          728|       { value = builtins.addErrorContext "while evaluating the option `${showOption loc}':" value;
             |         ^
          729|         inherit (res.defsFinal') highestPrio;

       … while evaluating the option `environment.systemPackages':

       … while evaluating the attribute 'mergedValue'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:763:5:

          762|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
          763|     mergedValue =
             |     ^
          764|       if isDefined then

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:757:9:

          756|       in {
          757|         values = defs''';
             |         ^
          758|         inherit (defs'') highestPrio;

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:856:7:

          855|     in {
          856|       values = concatMap (def: if getPrio def == highestPrio then [(strip def)] else []) defs;
             |       ^
          857|       inherit highestPrio;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:17:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                 ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:743:28:

          742|         # Process mkMerge and mkIf properties.
          743|         defs' = concatMap (m:
             |                            ^
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))

       … while evaluating definitions from `/nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/flake.nix':

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:744:137:

          743|         defs' = concatMap (m:
          744|           map (value: { inherit (m) file; inherit value; }) (builtins.addErrorContext "while evaluating definitions from `${m.file}':" (dischargeProperties m.value))
             |                                                                                                                                         ^
          745|         ) defs;

       … while calling 'dischargeProperties'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:815:25:

          814|   */
          815|   dischargeProperties = def:
             |                         ^
          816|     if def._type or "" == "merge" then

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:821:11:

          820|         if def.condition then
          821|           dischargeProperties def.content
             |           ^
          822|         else

       … while calling 'dischargeProperties'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:815:25:

          814|   */
          815|   dischargeProperties = def:
             |                         ^
          816|     if def._type or "" == "merge" then

       … while evaluating the attribute 'content'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:886:14:

          885|     { _type = "if";
          886|       inherit condition content;
             |              ^
          887|     };

       … while evaluating call site

       at /nix/store/xl5i4ql868kwrivb9klgxnps58iz2352-source/nix/module.nix:36:34:

           35|   config = mkIf cfg.enable {
           36|     environment.systemPackages = lib.optional (cfg.package != null) cfg.package;
             |                                  ^
           37|     security.polkit.enable = true;

       … while calling 'optional'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/lists.nix:255:20:

          254|   */
          255|   optional = cond: elem: if cond then [elem] else [];
             |                    ^
          256|

       … while evaluating call site

       at «none»:0: (source not available)

       … while calling 'g'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:535:19:

          534|           g =
          535|             name: value:
             |                   ^
          536|             if isAttrs value && cond value

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/attrsets.nix:538:20:

          537|               then recurse (path ++ [name]) value
          538|               else f (path ++ [name]) value;
             |                    ^
          539|         in mapAttrs g;

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:270:72:

          269|           # For definitions that have an associated option
          270|           declaredConfig = mapAttrsRecursiveCond (v: ! isOption v) (_: v: v.value) options;
             |                                                                        ^
          271|

       … while evaluating the attribute 'value'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:728:9:

          727|     in warnDeprecation opt //
          728|       { value = builtins.addErrorContext "while evaluating the option `${showOption loc}':" value;
             |         ^
          729|         inherit (res.defsFinal') highestPrio;

       … while evaluating the option `programs.hyprland.package':

       … while evaluating the attribute 'mergedValue'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:763:5:

          762|     # Type-check the remaining definitions, and merge them. Or throw if no definitions.
          763|     mergedValue =
             |     ^
          764|       if isDefined then

       … while evaluating the attribute 'values'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:757:9:

          756|       in {
          757|         values = defs''';
             |         ^
          758|         inherit (defs'') highestPrio;

       … while evaluating call site

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:753:14:

          752|           # Avoid sorting if we don't have to.
          753|           if any (def: def.value._type or "" == "order") defs''.values
             |              ^
          754|           then sortProperties defs''.values

       … while calling anonymous lambda

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:753:19:

          752|           # Avoid sorting if we don't have to.
          753|           if any (def: def.value._type or "" == "order") defs''.values
             |                   ^
          754|           then sortProperties defs''.values

       … while evaluating the attribute 'value._type'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:854:73:

          853|       highestPrio = foldl' (prio: def: min (getPrio def) prio) 9999 defs;
          854|       strip = def: if def.value._type or "" == "override" then def // { value = def.value.content; } else def;
             |                                                                         ^
          855|     in {

       … while evaluating the attribute 'value.content'

       at /nix/store/si9r9isfbg2fl7az5w3gwwrbdpzpfvcl-source/lib/modules.nix:901:14:

          900|     { _type = "override";
          901|       inherit priority content;
             |              ^
          902|     };

       … while evaluating the attribute 'default'

       at /nix/store/xl5i4ql868kwrivb9klgxnps58iz2352-source/nix/module.nix:22:7:

           21|       type = types.nullOr types.package;
           22|       default = self.packages.${pkgs.system}.default;
             |       ^
           23|       defaultText = literalExpression "<Hyprland flake>.packages.<system>.default";

       … while evaluating the attribute 'packages.aarch64-linux.default'

       at /nix/store/xl5i4ql868kwrivb9klgxnps58iz2352-source/flake.nix:45:5:

           44|
           45|     packages = genSystems (system:
             |     ^
           46|       (self.overlays.default null pkgsFor.${system})

       error: attribute 'aarch64-linux' missing

       at /nix/store/xl5i4ql868kwrivb9klgxnps58iz2352-source/nix/module.nix:22:17:

           21|       type = types.nullOr types.package;
           22|       default = self.packages.${pkgs.system}.default;
             |                 ^
